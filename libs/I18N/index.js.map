{"version":3,"file":"index.js","sources":["../../src/I18N/index.js"],"sourcesContent":["import i18next from 'i18next'\r\n\r\n/**\r\n * 基于 i18next 的国际化简单封装\r\n * @author 赵金添 <729234283@qq.com>\r\n * @example\r\n * // 新建实例、初始化、添加全局语言资源\r\n * const i18n = new I18N('zh-CN').init().addResources(null, require.context('./locales/', true, /\\.json$/))\r\n * // 添加业务模块语言资源\r\n * i18n.addResources('articles', require.context('./locales/', true, /\\.json$/))\r\n * // 获取翻译函数\r\n * const t = i18n.getT('articles')\r\n * // 读取翻译\r\n * t('articleList')\r\n */\r\nexport default class I18N {\r\n  /**\r\n   * 构造方法\r\n   * @param {string} lng 默认语言\r\n   */\r\n  constructor (lng) {\r\n    this.lng = lng || this.getBrowserLanguage()\r\n    this.ns = 'translation'\r\n  }\r\n\r\n  /**\r\n   * 初始化\r\n   * @return {I18N}\r\n   */\r\n  init () {\r\n    i18next.init({\r\n      debug: true,\r\n      lng: this.lng,\r\n      fallbackNS: 'translation',\r\n      load: 'all'\r\n    })\r\n\r\n    return this\r\n  }\r\n\r\n  /**\r\n   * 添加语言资源\r\n   * @param {string} ns 业务模块\r\n   * @param {Function} req 语言资源\r\n   * @return {I18N}\r\n   */\r\n  addResources (ns, req) {\r\n    ns = ns || this.ns\r\n\r\n    req.keys().forEach((path) => {\r\n      const resources = req(path)\r\n      const paths = path.split('/')\r\n      const lng = paths[1]\r\n\r\n      i18next.addResourceBundle(lng, ns, resources, true, true)\r\n    })\r\n\r\n    return this\r\n  }\r\n\r\n  /**\r\n   * 获取浏览器语言环境\r\n   * @return {string}\r\n   */\r\n  getBrowserLanguage () {\r\n    return navigator.language || navigator.browserLanguage\r\n  }\r\n\r\n  /**\r\n   * 切换到某种语言\r\n   * @param {string} lng 语言\r\n   * @return {I18N}\r\n   */\r\n  switchTo (lng) {\r\n    i18next.changeLanguage(lng)\r\n    this.lng = lng\r\n\r\n    return this\r\n  }\r\n\r\n  /**\r\n   * 获取翻译\r\n   * @param {string} ns 业务模块\r\n   */\r\n  getT (ns) {\r\n    return i18next.getFixedT(this.lng, ns || this.ns)\r\n  }\r\n}\r\n"],"names":["I18N","lng","this","getBrowserLanguage","ns","init","req","keys","forEach","path","resources","split","addResourceBundle","navigator","language","browserLanguage","changeLanguage","i18next","getFixedT"],"mappings":"oyBAeqBA,2BAKNC,+BACNA,IAAMA,GAAOC,KAAKC,0BAClBC,GAAK,gFAQFC,aACC,MACFH,KAAKD,eACE,mBACN,QAGDC,0CASKE,EAAIE,YACXF,GAAMF,KAAKE,KAEZG,OAAOC,QAAQ,SAACC,OACZC,EAAYJ,EAAIG,GAEhBR,EADQQ,EAAKE,MAAM,KACP,WAEVC,kBAAkBX,EAAKG,EAAIM,GAAW,GAAM,KAG/CR,yDAQAW,UAAUC,UAAYD,UAAUE,iDAQ/Bd,kBACAe,eAAef,QAClBA,IAAMA,EAEJC,kCAOHE,UACGa,QAAQC,UAAUhB,KAAKD,IAAKG,GAAMF,KAAKE"}